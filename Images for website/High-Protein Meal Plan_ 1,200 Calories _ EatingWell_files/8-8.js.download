webpackJsonp([8],{200:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(831),i=(o.n(n),o(17)),r=o.n(i),a=o(31),s=o.n(a),l=o(13),c=o(639),u=function(){function defineProperties(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,o){return e&&defineProperties(t.prototype,e),o&&defineProperties(t,o),t}}();var p=function(){function RecipeReviewSort(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,RecipeReviewSort),this.$context=t,this.$options=t.find(".sort-option"),this.$reviewsContainer=t.closest(".recipe-reviews"),this.$reviews=t.closest(".recipe-reviews").find(".recipe-reviewed-items"),this.$more=t.closest(".recipe-reviews").find(".recipe-reviews-link"),this.$pagination=t.closest(".recipe-reviews").find(".pagination-numbers"),this.$trigger=t.find(".sort-title-trigger"),this.$selected=t.find(".sort-title-selected"),this.id=r()(t).closest(".recipe-reviews").data("id")||null,this.ugcId=r()(t).closest(".ugc-reviews").data("id")||null,this.sort=t.find(".sort-option.active").data("sort")||null,this.$context.addClass("initialized")}return u(RecipeReviewSort,[{key:"renderReviews",value:function(t){t&&(this.$reviews.html(t.html),s()(l.v).broadcast(t.reviews,!0),r()("body").hasClass("reviews-page-active")||s()(l.O).broadcast())}},{key:"getReviews",value:function(){var t=this;if(this.sort){var e=o.i(c.a)("/element-api/content-proxy/reviews"),n=0,i=r()("body").hasClass("reviews-page-active");i&&this.$reviewsContainer.data("page")&&(n=this.$reviewsContainer.data("page"),this.setPaginationLinks());var a={id:r()(".component.ugc-reviews").is(":visible")?this.ugcId:this.id,page:n,sort:this.sort};i&&(a.is_reviews_sort_page=!0),r.a.get(e,a,function(e){t.setSortLink(t.$more),t.renderReviews(e)})}}},{key:"setSortLink",value:function(t){if(this.sort&&t.length&&t.attr("href")){var e=new URLSearchParams(t.attr("href"));-1!==t.attr("href").indexOf("sort")?e.set("sort",this.sort):e.append("sort",this.sort),t.attr("href","?"+e.toString())}}},{key:"setPaginationLinks",value:function(){var t=this;this.sort&&this.$pagination.length&&this.$pagination.find(".pagination-number").length&&this.$pagination.find(".pagination-number").each(function(e,o){t.setSortLink(r()(o))})}},{key:"events",value:function(){var t=this;s()(l.d).subscribe(function(e,o){var n=o.closest(t.$options);if(n.length&&(e.preventDefault(),t.sort!==n.data("sort"))){t.$options.removeClass("active"),n.addClass("active"),t.sort=n.data("sort");var i=n.text()?n.text().trim():"";t.$selected.text(i),t.$options.each(function(t,e){var o=r()(e).text()?r()(e).text().trim():"";r()(e).find(".sort-option-title").attr("aria-label","Sort by "+o)}),n.find(".sort-option-title").attr("aria-label",i+" (Selected)"),t.getReviews()}if(o.closest(".sort-title-trigger").length){e.preventDefault();var a=o.closest(t.$context).find(".sort-options");a.hasClass("open")?(a.removeClass("open"),t.$trigger.attr("aria-expanded",!1)):(a.addClass("open"),t.$trigger.attr("aria-expanded",!0))}else r()(".recipe-reviews-sort .sort-options").length&&r()(".recipe-reviews-sort .sort-options").removeClass("open")})}},{key:"init",value:function(){this.events()}}]),RecipeReviewSort}();e.default=function(){r()(".component.recipe-reviews-sort").each(function(){new p(r()(this)).init()}),s()(l.N).subscribe(function(){r()(".component.recipe-reviews-sort:not(.initialized)").each(function(){new p(r()(this)).init()})})}},218:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(17),i=o.n(n),r=o(42),a=o.n(r),s=o(13),l=o(31),c=o.n(l),u=o(639),p=function(){function defineProperties(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,o){return e&&defineProperties(t.prototype,e),o&&defineProperties(t,o),t}}();var d=function(){function UgcPhotoUpload(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,UgcPhotoUpload),this.$context=t,this.$photoUploadComponent=t.find(".component.ugc-photo-upload"),this.$alert=t.find(".alert-banner"),this.$uploadedImg=t.find(".js--uploadedImage"),this.$fileInput=t.find(".js--fileInput"),this.$photoMaxUploadSize=this.$fileInput.data("photo-max-upload-size"),this.$favoriteModalLink=i()(".shareicon-favorite-link"),this.contentId=this.$favoriteModalLink.data("content-id"),this.photoUpload={photoId:null,photoUrl:null,step:{getPhotoId:"get_photo_id",uploadPhoto:"photo_upload"}}}return p(UgcPhotoUpload,[{key:"readUrl",value:function(){var t=this;if(this.$fileInput[0].files&&this.$fileInput[0].files[0]){var e=new FileReader;e.onload=function(e){a.a.set(t.$uploadedImg,"[0].style.backgroundImage","url("+e.target.result+")")},e.readAsDataURL(this.$fileInput[0].files[0])}}},{key:"showError",value:function(t){this.$alert.removeClass("hidden"),this.$alert.find(".alert-text").text(t)}},{key:"hideError",value:function(){this.$alert.addClass("hidden"),this.$alert.find(".alert-text").text("")}},{key:"photoUploadStatus",value:function(t){t?this.$photoUploadComponent.addClass("uploaded"):this.$photoUploadComponent.removeClass("uploaded")}},{key:"uploadPhoto",value:function(t){var e=this,n=t,r=o.i(u.a)("/element-api/content-proxy/photo-upload");i.a.post(r,n,function(o,n){"success"===n&&(e.hideError(),t.type===e.photoUpload.step.getPhotoId&&(a.a.get(o,"photoId")&&(e.photoUpload.photoId=a.a.get(o,"photoId"),e.photoUpload.photoUrl=a.a.get(o,"imageDestinationUrl")),c()(s.x).broadcast()),t.type===e.photoUpload.step.uploadPhoto&&e.photoUploadStatus(!0))}).fail(function(t,o,n){t.responseJSON&&t.responseJSON.message.includes("dimensions")?(e.showError(t.responseJSON.message),a.a.set(e.$uploadedImg,"[0].style.backgroundImage","")):e.showError("Error submitting. Please try again."),e.photoUploadStatus(!1)})}},{key:"photoMetaData",value:function(t){return{type:t,filename:this.$fileInput[0].value.replace(/.*[\/\\]/,""),contentId:this.contentId}}},{key:"photoUploadData",value:function(t){return{type:t,photoId:this.photoUpload.photoId,photoData:a.a.get(this.$uploadedImg,"[0].style.backgroundImage"),contentId:this.contentId}}},{key:"events",value:function(){var t=this;c()(s.y).subscribe(function(e,o){var n=t.photoMetaData(t.photoUpload.step.getPhotoId);t.uploadPhoto(n)}),c()(s.x).subscribe(function(e,o){var n=t.photoUploadData(t.photoUpload.step.uploadPhoto);t.uploadPhoto(n)}),this.$fileInput.on("change",function(){t.$fileInput[0].value&&(t.$fileInput[0].files[0].size>t.$photoMaxUploadSize?t.showError("Maximum photo size is "+Math.round(t.$photoMaxUploadSize/1024/1024)+" MB. Please submit a smaller photo."):(t.readUrl(t.$fileInput[0],t.$uploadedImg),c()(s.y).broadcast()))})}},{key:"init",value:function(){this.events()}}]),UgcPhotoUpload}();e.default=function(){i()(".component.ugc-upload-with-photo").each(function(){new d(i()(this)).init()})}},223:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(17),i=o.n(n),r=o(639);e.default=function(){var t=document.querySelector(".jumpstart-video-data").getAttribute("data-jumpstart-version"),e=document.createElement("script");e.src="https://cdn.video.timeinc.com/jumpstart/"+t+"/js/jumpstart.min.js",e.async=!0,document.body.appendChild(e);var n,a,s=[].concat(function(t){if(Array.isArray(t)){for(var e=0,o=Array(t.length);e<t.length;e++)o[e]=t[e];return o}return Array.from(t)}(document.querySelectorAll("video[data-video-id]"))).map(function(t){return t.dataset.videoId}).filter(function(t){return t});n=s,a=o.i(r.a)("/element-api/content-proxy/structured-data"),i.a.get(a,{type:"video",ids:n},function(t){if("error"!==t.status){var e=document.createElement("script");e.setAttribute("type","application/ld+json"),e.innerText=t,document.head.appendChild(e)}})}},639:function(t,e,o){"use strict";e.a=function(t){if(a()(document.body).data("add-slash")&&!i.a.endsWith(t,"/"))return t+"/";return t};var n=o(42),i=o.n(n),r=o(17),a=o.n(r)},831:function(t,e,o){(function(t){!function(t){"use strict";var e=t.URLSearchParams?t.URLSearchParams:null,o=e&&"a=1"===new e({a:1}).toString(),n=e&&"+"===new e("s=%2B").get("s"),i="__URLSearchParams__",r=URLSearchParamsPolyfill.prototype,a=!(!t.Symbol||!t.Symbol.iterator);if(!(e&&o&&n)){r.append=function(t,e){appendTo(this[i],t,e)},r.delete=function(t){delete this[i][t]},r.get=function(t){var e=this[i];return t in e?e[t][0]:null},r.getAll=function(t){var e=this[i];return t in e?e[t].slice(0):[]},r.has=function(t){return t in this[i]},r.set=function(t,e){this[i][t]=[""+e]},r.toString=function(){var t,e,o,n,r=this[i],a=[];for(e in r)for(o=encode(e),t=0,n=r[e];t<n.length;t++)a.push(o+"="+encode(n[t]));return a.join("&")};var s=!!n&&e&&!o&&t.Proxy;t.URLSearchParams=s?new Proxy(e,{construct:function(t,e){return new t(new URLSearchParamsPolyfill(e[0]).toString())}}):URLSearchParamsPolyfill;var l=t.URLSearchParams.prototype;l.polyfill=!0,l.forEach=l.forEach||function(t,e){var o=parseToDict(this.toString());Object.getOwnPropertyNames(o).forEach(function(n){o[n].forEach(function(o){t.call(e,o,n,this)},this)},this)},l.sort=l.sort||function(){var t,e,o,n=parseToDict(this.toString()),i=[];for(t in n)i.push(t);for(i.sort(),e=0;e<i.length;e++)this.delete(i[e]);for(e=0;e<i.length;e++){var r=i[e],a=n[r];for(o=0;o<a.length;o++)this.append(r,a[o])}},l.keys=l.keys||function(){var t=[];return this.forEach(function(e,o){t.push(o)}),makeIterator(t)},l.values=l.values||function(){var t=[];return this.forEach(function(e){t.push(e)}),makeIterator(t)},l.entries=l.entries||function(){var t=[];return this.forEach(function(e,o){t.push([o,e])}),makeIterator(t)},a&&(l[t.Symbol.iterator]=l[t.Symbol.iterator]||l.entries)}function URLSearchParamsPolyfill(t){((t=t||"")instanceof URLSearchParams||t instanceof URLSearchParamsPolyfill)&&(t=t.toString()),this[i]=parseToDict(t)}function encode(t){var e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'\(\)~]|%20|%00/g,function(t){return e[t]})}function decode(t){return decodeURIComponent(t.replace(/\+/g," "))}function makeIterator(e){var o={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return a&&(o[t.Symbol.iterator]=function(){return o}),o}function parseToDict(t){var e={};if("object"==typeof t)for(var o in t)t.hasOwnProperty(o)&&appendTo(e,o,t[o]);else{0===t.indexOf("?")&&(t=t.slice(1));for(var n=t.split("&"),i=0;i<n.length;i++){var r=n[i],a=r.indexOf("=");-1<a?appendTo(e,decode(r.slice(0,a)),decode(r.slice(a+1))):r&&appendTo(e,decode(r),"")}}return e}function appendTo(t,e,o){var n="string"==typeof o?o:null!==o&&void 0!==o&&"function"==typeof o.toString?o.toString():JSON.stringify(o);e in t?t[e].push(n):t[e]=[n]}}(void 0!==t?t:"undefined"!=typeof window?window:this)}).call(e,o(50))}});
//# sourceMappingURL=8-8.js.map